<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Java 2021 - Quiz Interactiv</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #c0392b;
            --bg-color: #f4f7f6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
        }

        .stats {
            font-size: 0.9em;
            color: #666;
        }

        .quiz-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .question-card {
            padding: 25px;
            border-bottom: 1px solid #eee;
        }

        .question-text {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid var(--accent-color);
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .options {
            list-style: none;
            padding: 0;
        }

        .option-item {
            margin-bottom: 10px;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            background-color: #f0f8ff;
            border-color: var(--accent-color);
        }

        input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .controls {
            padding: 20px;
            text-align: center;
            background: #eee;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        .result-box {
            display: none;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .correct-answer {
            background-color: rgba(39, 174, 96, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }

        .wrong-answer {
            background-color: rgba(192, 57, 43, 0.1);
            border: 1px solid var(--error-color);
            color: var(--error-color);
        }

        .explanation {
            margin-top: 5px;
            font-weight: normal;
            font-size: 0.9em;
            color: #555;
        }

        /* Highlight classes for results */
        .option-label.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .option-label.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
    </style>
</head>

<body>

    <header>
        <h1>Examen Java - Ianuarie 2021</h1>
        <div class="stats">Bazat pe sursele documentare furnizate</div>
    </header>

    <div class="quiz-container" id="quiz">
        <!-- Întrebările vor fi generate aici prin JS -->
    </div>

    <div class="controls">
        <div id="finalScore" style="font-weight: bold; font-size: 1.2em;"></div>
    </div>

    <script>
        // Datele extrase din sursele [1] - [2]
        const questions = [
            {
                id: 1,
                text: "Având în vedere codul de mai jos, care dintre afirmațiile sunt adevărate în ceea ce privește conceptul de imutabilitate aplicat în cazul clasei Student?",
                code: `class Student {
    long id;
    List<Double> grades;
}`,
                options: [
                    "toate",
                    "1, 2, 4",
                    "1, 2, 5",
                    "1, 3, 5"
                ],
                correct: 1, // Index 1 = "1, 2, 4"
                details: "1. Ambele câmpuri final; 2. Doar getteri; 4. Getter-ul returnează o copie."
            },
            {
                id: 2,
                text: "Care dintre afirmațiile de mai jos sunt adevărate referitor la colecții?",
                code: null,
                options: [
                    "toate",
                    "2 și 4",
                    "1, 2, 3",
                    "1, 3"
                ],
                correct: 1, // Index 1 = "2 și 4"
                details: "2. LinkedHashMap păstrează ordinea; 4. TreeSet nu păstrează ordinea inserției (le sortează)."
            },
            {
                id: 3,
                text: "Care dintre următoarele afirmații despre clase abstracte în Java sunt FALSE?",
                code: null,
                options: [
                    "1, 2",
                    "1, 3",
                    "3, 4",
                    "1, 3, 4"
                ],
                correct: 2, // Index 2 = "3, 4"
                details: "3. O clasă poate fi abstractă fără metode abstracte. 4. Java nu suportă moștenire multiplă de clase."
            },
            {
                id: 4,
                text: "Care dintre următoarele afirmații despre interfețe și clase abstracte sunt ADEVĂRATE?",
                code: null,
                options: [
                    "1, 2, 3",
                    "2, 4",
                    "1, 2, 3, 4",
                    "2, 3, 4"
                ],
                correct: 1, // Index 1 = "2, 4"
                details: "2. Interfața poate moșteni mai multe interfețe. 4. O clasă poate implementa mai multe interfețe."
            },
            {
                id: 5,
                text: "Care dintre următoarele afirmații e corectă referitor la cuvântul cheie 'final'?",
                code: null,
                options: [
                    "Cuvântul final în fața unei metode arată că acea metodă poate fi apelată doar în clasa respectivă",
                    "Cuvântul final în fața unei clase înseamnă că nu poate fi instanțiată",
                    "Cuvântul final în fața unei variabile arată că acea variabilă poate fi asignată o singură dată",
                    "Cuvântul final în fața unei variabile arată că acea variabilă nu poate fi moștenită"
                ],
                correct: 2
            },
            {
                id: 6,
                text: "Care dintre următoarele variante NU are legătură cu încapsularea?",
                code: null,
                options: [
                    "expunerea unei interfețe de lucru cu obiectul",
                    "accesul la membri privați folosind metode de tip getter și setter",
                    "construirea de obiecte complexe și ascunderea modului lor de funcționare",
                    "posibilitatea suprascrierii (overriding) metodelor"
                ],
                correct: 3
            },
            {
                id: 7,
                text: "Care este outputul următorului program?",
                code: `public class Star {
    private int shininess;
    static void change(Star s, int newShine) {
        s = new Star();
        s.shininess = newShine;
    }
    public static void main() {
        Star star = new Star();
        System.out.print("Old shininess: " + star.shininess + " | ");
        change(star, 10);
        System.out.println("New shininess: " + star.shininess);
    }
}`,
                options: [
                    "Old shininess: 0 | New shininess: 10",
                    "Old shininess: 0 | New shininess: 0",
                    "Old shininess: null | New shininess: 0",
                    "Old shininess: null | New shininess: 10"
                ],
                correct: 1 // Index 1 = 0 | 0
            },
            {
                id: 8,
                text: "Care instanțiere este corectă?",
                code: null,
                options: [
                    "List<Integer> list = new ArrayList<Object>();",
                    "ArrayList<Integer> list = new List<Integer>();",
                    "List<Integer> list = new ArrayList<Integer>();",
                    "ArrayList<Object> list = new ArrayList<Integer>();"
                ],
                correct: 2
            },
            {
                id: 9,
                text: "Ce design pattern face ușoară separarea operațiilor de obiectele pe care se execută operațiile respective?",
                code: null,
                options: [
                    "Builder Pattern",
                    "Visitor Pattern",
                    "Factory Pattern",
                    "Observer Pattern"
                ],
                correct: 1 // Visitor
            },
            {
                id: 10,
                text: "Ce design pattern trebuie să folosim în caz că dorim ca un client să nu aibă rol în crearea unui entități după o preferință de a sa?",
                code: null,
                options: [
                    "Singleton Pattern",
                    "Factory Pattern",
                    "Builder Pattern",
                    "Observer Pattern"
                ],
                correct: 1 // Factory
            },
            {
                id: 11,
                text: "Ce fel de Singleton este această secvență de cod?",
                code: `public static Database getInstance() {
    if (obj == null) {
        obj = new Database();
    }
    return obj;
}`,
                options: [
                    "Singleton cu inițializare eager",
                    "Singleton cu inițializare lazy",
                    "nu avem Singleton aici",
                    "Singleton cu inițializare în blocuri statice"
                ],
                correct: 1
            },
            {
                id: 12,
                text: "Ce metode pot fi accesate din clasa MyTest (extends Test)?",
                code: `package test;
public class Test {
    void execute1() {}
    protected void execute2() {}
    private void execute3() {}
}
// package mytest;
// MyTest extends Test`,
                options: [
                    "execute1, execute2 din Test, execute2 din MyTest",
                    "execute1, execute2 din Test, execute3, execute2 din MyTest",
                    "execute2 din Test, execute2 din MyTest",
                    "execute2 din MyTest"
                ],
                correct: 2 // execute2 (protected) is visible
            },
            {
                id: 13,
                text: "Ce reprezintă o metodă default în cadrul unei interfețe?",
                code: null,
                options: [
                    "o metodă abstractă",
                    "o metodă non-statică care este deja implementată într-o interfață",
                    "o metodă statică implementată într-o interfață",
                    "nu putem avea metode default într-o interfață"
                ],
                correct: 1
            },
            {
                id: 14,
                text: "Ce se va afișa la rularea acestui cod (Overloading/Overriding)?",
                code: `// AdobeReader extends DocumentViewer
// documentViewer referențiază new AdobeReader()
// file1 este PdfDocument
// file2 este CsvDocument
documentViewer.openDocument(file1);
documentViewer.openDocument(file2);`,
                options: [
                    "Opening document Cannot open csv",
                    "Adobe is opening pdf Cannot open csv",
                    "Adobe is opening pdf Opening csv",
                    "Opening document Opening csv"
                ],
                correct: 0 // "Opening document Cannot open csv"
            },
            {
                id: 15,
                text: "Ce se va afișa la execuția codului cu clase statice A și B?",
                code: `// A.B.write() -> prints A
// new A() -> A.write() prints C
// A.B.write() -> prints B`,
                options: [
                    "BCA",
                    "ACB",
                    "ADB",
                    "BDA"
                ],
                correct: 1 // ACB
            },
            {
                id: 16,
                text: "Ce tip de clasă reprezintă următoarea implementare?",
                code: "Predicate<Integer> check = x -> x % 2 == 0;",
                options: [
                    "clasă locală",
                    "clasă anonimă",
                    "clasă nested non-statică",
                    "clasă nested statică"
                ],
                correct: 1 // Conform grilei
            },
            {
                id: 17,
                text: "Ce va afișa programul cu string-uri?",
                code: `void first() {
    String a = "good";
    String b = second(a); // returns "luck"
    System.out.print(":" + a + b);
}`,
                options: [
                    "goodluck:goodluckluck",
                    "goodluck:goodgoodluck",
                    "goodluck:goodluck",
                    "goodluck:luckgoodluck"
                ],
                correct: 2
            },
            {
                id: 18,
                text: "Identificați pe care linii avem suprascriere și pe care avem supraîncărcare în AudioBook implements Book.",
                code: `1. public void markRead() {} 
2. public void markToRead() {} 
3. public void markRead(int rating) {} 
4. public void markRead(int rating, Date date) {}`,
                options: [
                    "Suprascriere: 1, Supraincărcare: 3, 4",
                    "Suprascriere: 1, 2, Supraincărcare: 3, 4",
                    "Suprascriere: 3, 4, Supraincărcare: 1, 2",
                    "Suprascriere: 3, 4, Supraincărcare: 1"
                ],
                correct: 1
            },
            {
                id: 19,
                text: "În ce zonă de memorie sunt stocate obiectele?",
                code: null,
                options: [
                    "pe stivă",
                    "pe heap",
                    "in memoria cache",
                    "memoria externă"
                ],
                correct: 1
            },
            {
                id: 20,
                text: "Pentru ce folosim map() pe colecții și pe arrays în Java?",
                code: null,
                options: [
                    "pentru filtrare (selectare elemente)",
                    "pentru a aplica o operație pe fiecare element (transformare)",
                    "pentru a reduce elementele la unul singur",
                    "pentru a crea o copie identică"
                ],
                correct: 1
            }
        ];

        let currentScore = 0;
        let answeredCount = 0;

        function escapeHTML(str) {
            if (!str) return "";
            return str
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        function renderQuiz() {
            const container = document.getElementById('quiz');
            let html = '';

            questions.forEach((q, index) => {
                let codeBlock = q.code ? `<pre><code>${escapeHTML(q.code)}</code></pre>` : '';

                let optionsHtml = q.options.map((opt, i) => `
                    <li class="option-item">
                        <label class="option-label" id="label-${index}-${i}">
                            <input type="radio" name="q${index}" value="${i}" onchange="checkAnswer(${index}, ${i})">
                            ${escapeHTML(opt)}
                        </label>
                    </li>
                `).join('');

                html += `
                    <div class="question-card" id="card-${index}">
                        <div class="question-text">${index + 1}. ${escapeHTML(q.text)}</div>
                        ${codeBlock}
                        <ul class="options">${optionsHtml}</ul>
                        <div class="result-box" id="result-${index}"></div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function checkAnswer(qIndex, selectedValue) {
            const q = questions[qIndex];
            const resultBox = document.getElementById(`result-${qIndex}`);
            const labels = document.querySelectorAll(`[id^="label-${qIndex}-"]`);
            const inputs = document.querySelectorAll(`input[name="q${qIndex}"]`);

            // Disable all inputs for this question to prevent changing answer
            inputs.forEach(input => input.disabled = true);
            
            // Show result box
            resultBox.style.display = 'block';
            resultBox.className = 'result-box';

            if (selectedValue === q.correct) {
                currentScore++;
                resultBox.innerHTML = "Corect!";
                resultBox.classList.add('correct-answer');
                document.getElementById(`label-${qIndex}-${selectedValue}`).classList.add('correct');
            } else {
                resultBox.innerHTML = `Greșit. Varianta corectă era: "${escapeHTML(q.options[q.correct])}"`;
                resultBox.classList.add('wrong-answer');
                document.getElementById(`label-${qIndex}-${selectedValue}`).classList.add('incorrect');
                document.getElementById(`label-${qIndex}-${q.correct}`).classList.add('correct');
            }

            if (q.details) {
                resultBox.innerHTML += `<div class="explanation">${escapeHTML(q.details)}</div>`;
            }

            answeredCount++;
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            const finalDiv = document.getElementById('finalScore');
            finalDiv.innerText = `Scor: ${currentScore} / ${questions.length} (Răspunsuri: ${answeredCount})`;
        }

        // Initialize
        renderQuiz();
        updateScoreDisplay();
    </script>
</body>

</html>
